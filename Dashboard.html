<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="light dark">
  <title>Dashboard — Scope</title>
  <style>
    :root{
      --brand-600:#7d79f9; --brand-700:#6c63d9;
      --brand-gradient:linear-gradient(90deg,#7d79f9,#c864aa);
      --brand-outline:color-mix(in srgb,var(--brand-600),#fff 40%);
      --ink-900:#0b1220; --ink-800:#111827; --ink-700:#1f2937; --ink-600:#374151; --ink-500:#4b5563;
      --surface:#ffffff; --muted:#f9fafb; --border:#e5e7eb; --card-border:#c4b5fd;
      --radius:16px; --shadow:0 10px 28px rgba(2,6,23,.06); --ring:0 0 0 3px rgba(125,121,249,0.6);
      --track-light:#e5e7eb; --track-dark:#374151;
      --card-radius:16px; --card-shadow:0 10px 28px rgba(2,6,23,.06);
    }
    *,*::before,*::after{box-sizing:border-box}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Inter,Roboto,Arial,sans-serif;background:var(--muted);color:var(--ink-900);line-height:1.7;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}
    a{color:inherit;text-decoration:none}
    button{font-family:inherit}
    button:focus-visible,a:focus-visible{outline:none;box-shadow:var(--ring)}

    header.appbar{position:sticky;top:0;background:rgba(255,255,255,.96);backdrop-filter:blur(10px);border-bottom:1px solid var(--border);box-shadow:0 8px 18px rgba(2,6,23,.04);z-index:50}
    .nav{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:14px;padding:0 clamp(28px,6vw,96px);height:64px}
    .brand{display:flex;gap:.6rem;align-items:center;font-weight:800;color:var(--ink-900);text-decoration:none}
    .brand .logo{inline-size:40px;block-size:40px;border-radius:12px;background:#fff;border:2px solid var(--brand-600);display:grid;place-items:center;box-shadow:var(--shadow)}
    .brand span{font-size:18px}
    .appbar-center{justify-self:center;font-weight:800}
    .nav-right{justify-self:end;display:flex;gap:12px;align-items:center}
    .btn{appearance:none;border:1px solid var(--brand-outline);border-radius:999px;padding:0 12px;height:32px;font-weight:700;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:background .3s ease,transform .3s ease,box-shadow .3s ease;background:#fff;text-decoration:none !important;box-shadow:0 1px 2px rgba(2,6,23,.06)}
    .btn:focus-visible{outline:none;box-shadow:var(--ring)}
    .btn:hover{transform:translateY(-1px)}
    .btn.ghost{background:transparent}
    .btn.sm{padding:0 10px;font-size:14px;height:32px}
    .chip{border:1px solid var(--brand-outline);border-radius:999px;padding:0 10px;height:32px;font-weight:700;background:#fff;cursor:pointer;display:inline-flex;align-items:center;font-size:14px;box-shadow:0 1px 2px rgba(2,6,23,.06);transition:background .3s ease,box-shadow .3s ease}
    .chip:focus-visible{outline:none;box-shadow:var(--ring)}
    .theme-switch{position:relative;display:inline-flex;width:56px;height:32px}
    .theme-switch input{opacity:0;width:0;height:0}
    .theme-switch .slider{position:relative;cursor:pointer;display:block;width:100%;height:100%;background:var(--track-light);transition:background .3s ease;border-radius:9999px;box-shadow:0 1px 2px rgba(0,0,0,.15);border:1px solid var(--brand-outline);padding:3px}
    .theme-switch input:focus-visible + .slider{box-shadow:var(--ring)}
    body[data-theme="dark"] .theme-switch .slider{background:var(--track-dark);box-shadow:0 1px 2px rgba(255,255,255,.3)}
    .theme-switch .thumb{position:absolute;top:50%;left:3px;width:24px;height:24px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:left .3s ease,transform .3s ease;border:1px solid var(--brand-outline);box-shadow:0 2px 4px rgba(0,0,0,.2);transform:translateY(-50%)}
    .theme-switch input:checked + .slider{background:var(--brand-600)}
    .theme-switch input:checked + .slider .thumb{left:calc(100% - 3px);transform:translate(-100%,-50%)}

    body[data-theme="dark"]{--ink-900:#f9fafb;--ink-800:#e5e7eb;--ink-700:#d1d5db;--ink-600:#9ca3af;--ink-500:#6b7280;--surface:#111827;--muted:#1f2937;--border:#374151;background:#0b1220;color:var(--ink-900)}
    body[data-theme="dark"] header.appbar{background:rgba(17,24,39,.96);border-bottom-color:var(--border)}
    body[data-theme="dark"] .btn,body[data-theme="dark"] .chip{background:var(--surface);color:var(--ink-900);border-color:var(--brand-outline)}
    body[data-theme="dark"] .btn.ghost{background:transparent}

    /* Drawer */
    #drawer-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.4);backdrop-filter:blur(2px);z-index:40}
    .drawer{position:fixed;top:0;right:0;height:100%;width:280px;max-width:80%;background:var(--surface);border-left:1px solid var(--card-border);box-shadow:-4px 0 18px rgba(0,0,0,.1);transform:translateX(100%);transition:transform .3s;z-index:50;padding:20px;display:flex;flex-direction:column;gap:20px}
    .drawer.open{transform:translateX(0)}
    .drawer a{padding:10px 0;font-weight:600}

    /* Layout */
    .container{max-width:1200px;margin-inline:auto;padding:20px}
    .kpis{display:grid;gap:20px;grid-template-columns:repeat(3,1fr)}
    @media (max-width:1024px){
      .kpis{grid-template-columns:repeat(2,1fr)}
      .kpi-card.is-right{grid-column:1/-1}
    }
    @media (max-width:768px){
      .kpis{grid-template-columns:1fr}
    }
    .kpi-card,.card{border:1px solid var(--card-border);border-radius:var(--card-radius);background:var(--surface);box-shadow:var(--card-shadow);padding:20px;transition:transform .2s,box-shadow .2s}
    .kpi-card:hover,.card:hover{transform:translateY(-2px);box-shadow:0 12px 32px rgba(2,6,23,.08)}
    .kpi-title{margin:0;font-size:14px;color:var(--ink-700);text-transform:uppercase;letter-spacing:.08em}
    .kpi-value{margin:6px 0;font-size:28px;font-weight:700;display:flex;align-items:center;gap:8px}
    .trend{font-size:12px;border-radius:999px;padding:2px 6px}
    .trend.positive{background:rgba(16,185,129,.2);color:#16a34a}
    .sparkline{width:100%;height:60px}
    .grid-sm{display:grid;gap:20px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));margin-top:20px}
  </style>
  <!-- Inline SVGs for Scope logo -->
  <svg width="0" height="0" style="position:absolute">
    <defs>
      <symbol id="icon-scope" viewBox="0 0 40 40">
        <circle cx="20" cy="20" r="18" fill="none" stroke="currentColor" stroke-width="3"/>
        <circle cx="20" cy="20" r="12" fill="none" stroke="currentColor" stroke-width="3"/>
        <circle cx="20" cy="20" r="6" fill="none" stroke="currentColor" stroke-width="3"/>
        <circle cx="20" cy="20" r="2.2" fill="currentColor"/>
      </symbol>
    </defs>
  </svg>
  <script>
    (function(){
      try{
        const authed = localStorage.getItem('scope.authed') === '1';
        const user = (localStorage.getItem('scope.user')||'').toLowerCase();
        if(!authed || user!=='test@gressholmen.no'){
          window.location.replace('login.html');
        }
      }catch(e){ window.location.replace('login.html'); }
    })();
  </script>
</head>
<body>
  <header class="appbar nav">
    <a class="brand" href="/" aria-label="Scope">
      <div class="logo" style="color:var(--brand-600)"><svg width="24" height="24" viewBox="0 0 40 40" aria-hidden="true"><use href="#icon-scope"/></svg></div><span>Scope</span>
    </a>
    <div class="appbar-center"><span id="company-name">Gressholmen Kro</span></div>
    <div class="nav-right">
      <a href="login.html" class="btn ghost sm" data-i18n="right.login">Logg inn</a>
      <button id="lang-toggle" class="chip">NO</button>
      <label class="theme-switch"><input id="theme-toggle" type="checkbox"><span class="slider"><span class="thumb"></span></span></label>
      <button id="menu-toggle" class="btn ghost sm" aria-label="Meny">☰</button>
    </div>
  </header>

  <div id="drawer-backdrop" hidden></div>
  <aside id="side-drawer" class="drawer" hidden>
    <a href="dashboard.html">Dashboard</a>
    <a href="#">Reports</a>
    <a href="#">Inventory</a>
    <a href="#">Settings</a>
    <a href="#" id="logout">Log out</a>
  </aside>

  <main class="container">
    <section class="kpis">
      <article class="kpi-card is-left">
        <h3 class="kpi-title">Omsetning i dag</h3>
        <div class="kpi-value">245&nbsp;900 kr<span class="trend positive">+3.1%</span></div>
        <svg class="sparkline" viewBox="0 0 100 30" preserveAspectRatio="none">
          <polyline points="0,20 20,10 40,15 60,5 80,12 100,8" fill="none" stroke="url(#grad)" stroke-width="2"/>
          <defs>
            <linearGradient id="grad" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%" stop-color="#7d79f9"/>
              <stop offset="100%" stop-color="#c864aa"/>
            </linearGradient>
          </defs>
        </svg>
      </article>
      <article class="kpi-card is-center">
        <h3 class="kpi-title">Dekningsbidrag</h3>
        <div class="kpi-value">115&nbsp;000 kr<span class="trend positive">+1.6%</span></div>
        <svg class="sparkline" viewBox="0 0 100 30" preserveAspectRatio="none">
          <polyline points="0,15 20,18 40,10 60,12 80,6 100,14" fill="none" stroke="url(#grad)" stroke-width="2"/>
        </svg>
      </article>
      <article class="kpi-card is-right">
        <h3 class="kpi-title">Besøk/Bookings</h3>
        <div class="kpi-value">1&nbsp;240<span class="trend positive">+0.8%</span></div>
        <svg class="sparkline" viewBox="0 0 100 30" preserveAspectRatio="none">
          <polyline points="0,25 20,16 40,20 60,12 80,18 100,10" fill="none" stroke="url(#grad)" stroke-width="2"/>
        </svg>
      </article>
    </section>

    <section class="grid-sm">
      <article class="card">Widget A</article>
      <article class="card">Widget B</article>
      <article class="card">Widget C</article>
      <article class="card">Widget D</article>
    </section>
  </main>
  <script>
    const $=(s,c=document)=>c.querySelector(s);
    const $$=(s,c=document)=>Array.from(c.querySelectorAll(s));

    function applyTheme(theme){
      document.body.setAttribute('data-theme',theme);
      const cs=document.querySelector('meta[name="color-scheme"]');
      if(cs) cs.setAttribute('content',theme==='dark'?'dark light':'light dark');
      const toggle=$('#theme-toggle');
      if(toggle) toggle.checked=(theme==='dark');
    }

    function labelForNext(lang){return lang==='no'?'EN':'NO';}

    const i18n={
      no:{"right.login":"Logg inn"},
      en:{"right.login":"Log in"}
    };

    function applyLang(lang){
      const dict=i18n[lang]||i18n.no;
      document.documentElement.lang=(lang==='en'?'en':'no');
      $$('[data-i18n]').forEach(el=>{
        const k=el.getAttribute('data-i18n');
        if(k in dict) el.textContent=dict[k];
      });
      const btn=$('#lang-toggle');
      if(btn) btn.textContent=labelForNext(lang);
    }

    const savedTheme=localStorage.getItem('scope.theme')||'light';
    applyTheme(savedTheme);
    $('#theme-toggle')?.addEventListener('change',e=>{
      const t=e.target.checked?'dark':'light';
      localStorage.setItem('scope.theme',t);
      applyTheme(t);
    });

    const saved=localStorage.getItem('scope.lang');
    const browser=((navigator.language||'').toLowerCase().startsWith('no'))?'no':'en';
    const start=saved||browser||'no';
    applyLang(start);
    $('#lang-toggle')?.addEventListener('click',()=>{
      const next=(document.documentElement.lang==='en')?'no':'en';
      localStorage.setItem('scope.lang',next);
      applyLang(next);
    });

    const drawer=$('#side-drawer');
    const backdrop=$('#drawer-backdrop');
    const menuToggle=$('#menu-toggle');
    menuToggle?.addEventListener('click',()=>{
      const hidden=drawer.hasAttribute('hidden');
      if(hidden){
        drawer.hidden=false;
        backdrop.hidden=false;
        drawer.classList.add('open');
      }else{
        drawer.classList.remove('open');
        drawer.hidden=true;
        backdrop.hidden=true;
      }
      menuToggle.setAttribute('aria-expanded',String(hidden));
    });
    backdrop?.addEventListener('click',()=>{
      drawer.classList.remove('open');
      drawer.hidden=true;backdrop.hidden=true;
      menuToggle.setAttribute('aria-expanded','false');
    });
    document.addEventListener('keydown',e=>{
      if(e.key==='Escape'){
        drawer.classList.remove('open');
        drawer.hidden=true;backdrop.hidden=true;
        menuToggle.setAttribute('aria-expanded','false');
      }
    });
  </script>
</body>
</html>
